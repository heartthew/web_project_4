(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var t=function(){function t(e){var n=e.baseUrl,r=e.headers;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._baseUrl=n,this._headers=r}var n,r;return n=t,(r=[{key:"_checkResponse",value:function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}},{key:"getInitialCards",value:function(){var e=this;return fetch(this._baseUrl+"/cards",{headers:this._headers}).then((function(t){return e._checkResponse(t)}))}},{key:"getUserInfo",value:function(){var e=this;return fetch(this._baseUrl+"/users/me",{headers:this._headers}).then((function(t){return e._checkResponse(t)}))}},{key:"setUserInfo",value:function(e){var t=this,n=e.name,r=e.about;return fetch(this._baseUrl+"/users/me",{headers:this._headers,method:"PATCH",body:JSON.stringify({name:n,about:r})}).then((function(e){return t._checkResponse(e)}))}},{key:"setAvatar",value:function(e){var t=this;return fetch(this._baseUrl+"/users/me/avatar",{headers:this._headers,method:"PATCH",body:JSON.stringify({avatar:e})}).then((function(e){return t._checkResponse(e)}))}},{key:"addCard",value:function(e){var t=this,n=e.name,r=e.link;return fetch(this._baseUrl+"/cards",{headers:this._headers,method:"POST",body:JSON.stringify({name:n,link:r})}).then((function(e){return t._checkResponse(e)}))}},{key:"deleteCard",value:function(e){var t=this;return fetch(this._baseUrl+"/cards/"+e,{headers:this._headers,method:"DELETE"}).then((function(e){return t._checkResponse(e)}))}},{key:"addLike",value:function(e){var t=this;return fetch(this._baseUrl+"/cards/likes/"+e,{method:"PUT",headers:this._headers}).then((function(e){return t._checkResponse(e)}))}},{key:"removeLike",value:function(e){var t=this;return fetch(this._baseUrl+"/cards/likes/"+e,{method:"DELETE",headers:this._headers}).then((function(e){return t._checkResponse(e)}))}}])&&e(n.prototype,r),t}();function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=function(){function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._items=r,this._renderer=o,this._container=document.querySelector(n)}var t,r;return t=e,(r=[{key:"renderItems",value:function(){var e=this;this._items.forEach((function(t){e._renderer(t)}))}},{key:"prependItem",value:function(e){this._container.prepend(e)}},{key:"addItem",value:function(e){this._container.append(e)}}])&&n(t.prototype,r),e}();function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(t,n,r){var o=t.data,i=t.handleCardClick,a=t.handleDeleteClick;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._link=o.link,this._name=o.name,this._likes=o.likes,this._template=n,this._handleCardClick=i,this._handleDeleteClick=a,this._id=o._id,this._ownerId=o.owner._id,this._owner=o.owner,this._api=r}var t,n;return t=e,(n=[{key:"findId",value:function(){return this._id}},{key:"_handleLike",value:function(){this._card.querySelector(".element__like-button").classList.toggle("element__like-button_active")}},{key:"_tallyLikes",value:function(){this._card.querySelector(".element__like-tally").textContent=this._likes.length}},{key:"_ownerLike",value:function(e){return this._likes.find((function(t){return t._id===e}))}},{key:"handleTrash",value:function(){this._card.remove(),this._card=null}},{key:"_getTemplate",value:function(){return document.querySelector(this._template).content.querySelector(".element")}},{key:"_setEventListeners",value:function(e){var t=this,n=this._card.querySelector(".element__trash-button");e===this._ownerId?n.addEventListener("click",(function(){t._handleDeleteClick(t.id)})):n.classList.add("element__hidden"),this._card.querySelector(".element__like-button").addEventListener("click",(function(){t._ownerLike(e)?t._api.removeLike(t._id).then((function(e){t._likes=e.likes,t._handleLike(),t._tallyLikes()})).catch((function(e){return console.log(e)})):t._api.addLike(t._id).then((function(e){t._likes=e.likes,t._handleLike(),t._tallyLikes()})).catch((function(e){return console.log(e)}))})),this._card.querySelector(".element__image").addEventListener("click",(function(){return t._handleCardClick(t._link,t._name)}))}},{key:"createCard",value:function(e){this._card=this._getTemplate().cloneNode(!0);var t=this._card.querySelector(".element__image");return this._card.querySelector(".element__title").textContent=this._name,t.style.backgroundImage="url(".concat(this._link,")"),t.alt=this._name,this._ownerLike(e)&&this._handleLike(),this._setEventListeners(e),this._tallyLikes(),this._card}}])&&o(t.prototype,n),e}();function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=function(){function e(t){var n=t.personSelector,r=t.jobSelector,o=t.avatarSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=document.querySelector(n),this._about=document.querySelector(r),this._avatar=document.querySelector(o)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:this._name.textContent,about:this._about.textContent}}},{key:"setUserInfo",value:function(e,t,n){this._name.textContent=e,this._about.textContent=t,this.id=n}},{key:"setAvatar",value:function(e){this._avatar.src=e}}])&&a(t.prototype,n),e}();function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}const l=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._formSelector=t._formSelector,this._inputSelector=t.inputSelector,this._submitButtonSelector=t.submitButtonSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._errorClass=t.errorClass,this._form=n}var t,n;return t=e,(n=[{key:"_showErrorMessage",value:function(e){var t=this._form.querySelector("#"+e.id+"-error");t.textContent=e.validationMessage,t.classList.add(this._errorClass),e.classList.add(this._inputErrorClass)}},{key:"_hideErrorMessage",value:function(e){var t=this._form.querySelector("#"+e.id+"-error");t.textContent="",t.classList.remove(this._errorClass),e.classList.remove(this._inputErrorClass)}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideErrorMessage(e,e.validationMessage):this._showErrorMessage(e,e.validationMessage)}},{key:"_setEventListeners",value:function(){var e,t=this,n=function(e){if(Array.isArray(e))return c(e)}(e=this._form.querySelectorAll(this._inputSelector))||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),r=this._form.querySelector(this._submitButtonSelector);n.forEach((function(e){e.addEventListener("input",(function(){t._checkInputValidity(e,e.validationMessage),t._toggleButtonState(n,r)}))})),this._form.addEventListener("reset",(function(){n.forEach((function(e){t._hideErrorMessage(e)})),t._toggleButtonState(n,r)}))}},{key:"_hasInvalidInput",value:function(e){return e.some((function(e){return!e.validity.valid}))}},{key:"_toggleButtonState",value:function(e,t){this._hasInvalidInput(e)?(t.classList.add(this._inactiveButtonClass),t.disabled=!0):(t.classList.remove(this._inactiveButtonClass),t.disabled=!1)}},{key:"enableValidation",value:function(){this._form.addEventListener("submit",(function(e){e.preventDefault()})),this._setEventListeners()}}])&&s(t.prototype,n),e}();function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var h=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popupElement=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this)}var t,n;return t=e,(n=[{key:"open",value:function(){this._popupElement.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popupElement.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"setEventListeners",value:function(){var e=this;this._popupElement.addEventListener("click",(function(t){t.target.classList.contains("popup__close-button")&&e.close()})),this._popupElement.addEventListener("click",(function(t){t.target.classList.contains("popup_opened")&&e.close()}))}}])&&f(t.prototype,n),e}();function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t,n){return(d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=m(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=m(r);if(o){var n=m(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return v(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e))._fullImage=t._popupElement.querySelector(".popup__image"),t._fullTitle=t._popupElement.querySelector(".popup__title"),t}return t=a,(n=[{key:"open",value:function(e,t){this._fullImage.src=e,this._fullTitle.textContent=t,d(m(a.prototype),"open",this).call(this)}}])&&_(t.prototype,n),a}(h);function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e,t,n){return(S="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=C(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e,t){return!t||"object"!==k(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=C(r);if(o){var n=C(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return w(this,e)});function a(e){var t,n=e.popupElement,r=e.handleFormSubmit;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,n))._handleFormSubmit=r,t._form=t._popupElement.querySelector(".form"),t._submit=t._form.querySelector(".form__submit"),t._inputList=Array.from(t._form.querySelectorAll(".form__item")),t}return t=a,(n=[{key:"_getInputValues",value:function(){var e=this;return this._formValues={},this._inputList.forEach((function(t){e._formValues[t.name]=t.value})),this._formValues}},{key:"open",value:function(){S(C(a.prototype),"open",this).call(this),this._form.reset()}},{key:"close",value:function(){S(C(a.prototype),"close",this).call(this),this._form.reset()}},{key:"setEventListeners",value:function(){var e=this;this._form.addEventListener("submit",(function(t){t.preventDefault(),e._submit.textContent="Saving...",e._handleFormSubmit(e._getInputValues()).then((function(){e._submit.textContent=e._submit.value})).catch((function(e){return console.log(e)}))})),S(C(a.prototype),"setEventListeners",this).call(this)}}])&&g(t.prototype,n),a}(h);function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function I(e,t,n){return(I="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=q(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function R(e,t){return!t||"object"!==L(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function q(e){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var T=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=q(r);if(o){var n=q(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return R(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e))._button=t._popupElement.querySelector(".form__submit"),t}return t=a,(n=[{key:"handleYes",value:function(e){this._confirm=e}},{key:"setEventListeners",value:function(){var e=this;I(q(a.prototype),"setEventListeners",this).call(this),this._popupElement.addEventListener("submit",(function(t){t.preventDefault(),e._confirm()}))}}])&&j(t.prototype,n),a}(h),A={formSelector:".form",inputSelector:".form__item",submitButtonSelector:".form__submit",inactiveButtonClass:"form__submit_disabled",inputErrorClass:"form__type-error",errorClass:"popup__error_visible"},U=document.querySelector(".profile__edit-button"),x=document.querySelector(".profile__add-button"),B=document.querySelector(".profile__avatar-button"),D=document.querySelector(".form_add"),M=document.querySelector(".form_edit"),V=document.querySelector(".form_avatar"),F=M.querySelector(".form__item_input_name"),N=M.querySelector(".form__item_input_job");function J(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var H=new t({baseUrl:"https://around.nomoreparties.co/v1/group-7",headers:{authorization:"cd1cfdf8-4aa7-46c5-9465-44c7c15c403b","Content-Type":"application/json"}}),Y=new u({personSelector:".profile__name",jobSelector:".profile__occupation",avatarSelector:".profile__avatar"});function $(e){var t=new i({data:e,handleCardClick:function(e,t){K.open(e,t)},handleDeleteClick:function(){Q.open(),Q.handleYes((function(){H.deleteCard(t.findId()).then((function(){t.handleTrash(),Q.close()})).catch((function(e){return console.log(e)}))}))}},".element-template",H);return t.createCard(Y.id)}Promise.all([H.getUserInfo(),H.getInitialCards()]).then((function(e){var t,n,o=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}}(t,n)||function(e,t){if(e){if("string"==typeof e)return J(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?J(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=o[0],a=o[1];Y.setUserInfo(i.name,i.about,i._id),Y.setAvatar(i.avatar);var u=new r({items:a,renderer:function(e){u.addItem($(e))}},".elements");u.renderItems();var c=new O({popupElement:".popup_type_add",handleFormSubmit:function(e){return H.addCard(e).then((function(e){var t=$(e);u.prependItem(t),c.close()}))}});c.setEventListeners(),x.addEventListener("click",(function(){c.open()}))})).catch((function(e){return console.log("err",e)}));var z=new O({popupElement:".popup_type_edit",handleFormSubmit:function(e){return H.setUserInfo({name:e.user,about:e.job}).then((function(e){Y.setUserInfo(e.name,e.about,e._id),z.close()})).catch((function(e){return console.log("err",e)}))}});z.setEventListeners(),U.addEventListener("click",(function(){var e=Y.getUserInfo();z.open(),F.value=e.name,N.value=e.about}));var G=new O({popupElement:".popup_type_avatar",handleFormSubmit:function(e){return H.setAvatar(e.link).then((function(e){Y.setAvatar(e.avatar),G.close()})).catch((function(e){return console.log("err",e)}))}});G.setEventListeners(),B.addEventListener("click",(function(){G.open()}));var K=new b(".popup_type_image"),Q=new T(".popup_type_confirm");K.setEventListeners(),Q.setEventListeners();var W=new l(A,M),X=new l(A,D),Z=new l(A,V);W.enableValidation(),X.enableValidation(),Z.enableValidation()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cENvbmZpcm0uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9wYWdlL2luZGV4LmpzIl0sIm5hbWVzIjpbIkFwaSIsImJhc2VVcmwiLCJoZWFkZXJzIiwidGhpcyIsIl9iYXNlVXJsIiwiX2hlYWRlcnMiLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiZmV0Y2giLCJ0aGVuIiwiX2NoZWNrUmVzcG9uc2UiLCJuYW1lIiwiYWJvdXQiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImF2YXRhciIsImxpbmsiLCJjYXJkSWQiLCJTZWN0aW9uIiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImZvckVhY2giLCJpdGVtIiwiZWxlbWVudCIsInByZXBlbmQiLCJhcHBlbmQiLCJDYXJkIiwidGVtcGxhdGUiLCJhcGkiLCJkYXRhIiwiaGFuZGxlQ2FyZENsaWNrIiwiaGFuZGxlRGVsZXRlQ2xpY2siLCJfbGluayIsIl9uYW1lIiwiX2xpa2VzIiwibGlrZXMiLCJfdGVtcGxhdGUiLCJfaGFuZGxlQ2FyZENsaWNrIiwiX2hhbmRsZURlbGV0ZUNsaWNrIiwiX2lkIiwiX293bmVySWQiLCJvd25lciIsIl9vd25lciIsIl9hcGkiLCJfY2FyZCIsImNsYXNzTGlzdCIsInRvZ2dsZSIsInRleHRDb250ZW50IiwibGVuZ3RoIiwidXNlcklkIiwiZmluZCIsImxpa2UiLCJyZW1vdmUiLCJjb250ZW50IiwidHJhc2hCdXR0b24iLCJhZGRFdmVudExpc3RlbmVyIiwiaWQiLCJhZGQiLCJfb3duZXJMaWtlIiwicmVtb3ZlTGlrZSIsIl9oYW5kbGVMaWtlIiwiX3RhbGx5TGlrZXMiLCJjYXRjaCIsImVyciIsImNvbnNvbGUiLCJsb2ciLCJhZGRMaWtlIiwiX2dldFRlbXBsYXRlIiwiY2xvbmVOb2RlIiwiY2FyZEltYWdlIiwic3R5bGUiLCJiYWNrZ3JvdW5kSW1hZ2UiLCJhbHQiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJVc2VySW5mbyIsInBlcnNvblNlbGVjdG9yIiwiam9iU2VsZWN0b3IiLCJhdmF0YXJTZWxlY3RvciIsIl9hYm91dCIsIl9hdmF0YXIiLCJ1c2VyIiwiam9iIiwic3JjIiwic2V0dGluZ3MiLCJmb3JtIiwiX2Zvcm1TZWxlY3RvciIsIl9pbnB1dFNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsIl9mb3JtIiwiaW5wdXQiLCJlcnJvciIsInZhbGlkYXRpb25NZXNzYWdlIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oaWRlRXJyb3JNZXNzYWdlIiwiX3Nob3dFcnJvck1lc3NhZ2UiLCJpbnB1dHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiYnV0dG9uIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsIl90b2dnbGVCdXR0b25TdGF0ZSIsInNvbWUiLCJfaGFzSW52YWxpZElucHV0IiwiZGlzYWJsZWQiLCJldnQiLCJwcmV2ZW50RGVmYXVsdCIsIlBvcHVwIiwicG9wdXBFbGVtZW50IiwiX3BvcHVwRWxlbWVudCIsIl9oYW5kbGVFc2NDbG9zZSIsImJpbmQiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwia2V5IiwiY2xvc2UiLCJ0YXJnZXQiLCJjb250YWlucyIsIlBvcHVwV2l0aEltYWdlIiwiX2Z1bGxJbWFnZSIsIl9mdWxsVGl0bGUiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlRm9ybVN1Ym1pdCIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX3N1Ym1pdCIsIl9pbnB1dExpc3QiLCJBcnJheSIsImZyb20iLCJfZm9ybVZhbHVlcyIsInZhbHVlIiwicmVzZXQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJQb3B1cENvbmZpcm0iLCJfYnV0dG9uIiwiY29uZmlybSIsIl9jb25maXJtIiwiZGVmYXVsdENvbmZpZyIsImZvcm1TZWxlY3RvciIsImVkaXRCdXR0b24iLCJhZGRCdXR0b24iLCJhdmF0YXJCdXR0b24iLCJmb3JtQWRkIiwiZm9ybUVkaXQiLCJmb3JtQXZhdGFyIiwicGVyc29uIiwiYXV0aG9yaXphdGlvbiIsInVzZXJJbmZvIiwibWFrZUNhcmQiLCJjYXJkIiwicG9wdXBJbWFnZSIsIm9wZW4iLCJwb3B1cENvbmZpcm0iLCJoYW5kbGVZZXMiLCJkZWxldGVDYXJkIiwiZmluZElkIiwiaGFuZGxlVHJhc2giLCJjcmVhdGVDYXJkIiwiYWxsIiwiZ2V0VXNlckluZm8iLCJnZXRJbml0aWFsQ2FyZHMiLCJwbGFjZXMiLCJzZXRVc2VySW5mbyIsInNldEF2YXRhciIsImNhcmRzIiwiY2FyZEl0ZW0iLCJhZGRJdGVtIiwicmVuZGVySXRlbXMiLCJwb3B1cEFkZCIsIm5ld0RhdGEiLCJhZGRDYXJkIiwicHJlcGVuZEl0ZW0iLCJzZXRFdmVudExpc3RlbmVycyIsInBvcHVwRWRpdCIsIm5ld1VzZXIiLCJmaWxsVXNlciIsInBvcHVwQXZhdGFyIiwiaW1hZ2VMaW5rIiwiZWRpdEZvcm1WYWxpZGF0b3IiLCJGb3JtVmFsaWRhdG9yIiwiYWRkRm9ybVZhbGlkYXRvciIsImF2YXRhckZvcm1WYWxpZGF0b3IiLCJlbmFibGVWYWxpZGF0aW9uIl0sIm1hcHBpbmdzIjoiNkxBQXFCQSxFLFdBQ2pCLGNBQWtDLElBQXBCQyxFQUFvQixFQUFwQkEsUUFBU0MsRUFBVyxFQUFYQSxTLDRGQUFXLFNBQzlCQyxLQUFLQyxTQUFXSCxFQUNoQkUsS0FBS0UsU0FBV0gsRSxtREFHcEIsU0FBZUksR0FDWCxPQUFJQSxFQUFJQyxHQUNHRCxFQUFJRSxPQUVSQyxRQUFRQyxPQUFSLGlCQUF5QkosRUFBSUssVyw2QkFHeEMsV0FBa0IsV0FDZCxPQUFPQyxNQUFNVCxLQUFLQyxTQUFXLFNBQVUsQ0FDL0JGLFFBQVNDLEtBQUtFLFdBRWpCUSxNQUFLLFNBQUFQLEdBQUcsT0FBSSxFQUFLUSxlQUFlUixRLHlCQUd6QyxXQUFjLFdBQ1YsT0FBT00sTUFBTVQsS0FBS0MsU0FBVyxZQUFhLENBQ2xDRixRQUFTQyxLQUFLRSxXQUVqQlEsTUFBSyxTQUFBUCxHQUFHLE9BQUksRUFBS1EsZUFBZVIsUSx5QkFHekMsWUFBNkIsV0FBZlMsRUFBZSxFQUFmQSxLQUFNQyxFQUFTLEVBQVRBLE1BQ2hCLE9BQU9KLE1BQU1ULEtBQUtDLFNBQVcsWUFBYSxDQUNsQ0YsUUFBU0MsS0FBS0UsU0FDZFksT0FBUSxRQUNSQyxLQUFNQyxLQUFLQyxVQUFVLENBQ2pCTCxPQUNBQyxZQUdQSCxNQUFLLFNBQUFQLEdBQUcsT0FB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LEdBQ3JEcUMsRUFBbUIsSUFBSUQsRUFBYzFDLEVBQWVLLEdBQ3BEdUMsRUFBc0IsSUFBSUYsRUFBYzFDLEVBQWVPLEdBQzdEa0MsRUFBa0JJLG1CQUNsQkYsRUFBaUJFLG1CQUNqQkQsRUFBb0JDLG9CIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xyXG4gICAgY29uc3RydWN0b3IoeyBiYXNlVXJsLCBoZWFkZXJzIH0pIHtcclxuICAgICAgICB0aGlzLl9iYXNlVXJsID0gYmFzZVVybDtcclxuICAgICAgICB0aGlzLl9oZWFkZXJzID0gaGVhZGVycztcclxuICAgIH1cclxuXHJcbiAgICBfY2hlY2tSZXNwb25zZShyZXMpIHtcclxuICAgICAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0SW5pdGlhbENhcmRzKCkge1xyXG4gICAgICAgIHJldHVybiBmZXRjaCh0aGlzLl9iYXNlVXJsICsgXCIvY2FyZHNcIiwge1xyXG4gICAgICAgICAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVyc1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbihyZXMgPT4gdGhpcy5fY2hlY2tSZXNwb25zZShyZXMpKVxyXG4gICAgfVxyXG5cclxuICAgIGdldFVzZXJJbmZvKCkge1xyXG4gICAgICAgIHJldHVybiBmZXRjaCh0aGlzLl9iYXNlVXJsICsgXCIvdXNlcnMvbWVcIiwge1xyXG4gICAgICAgICAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVyc1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbihyZXMgPT4gdGhpcy5fY2hlY2tSZXNwb25zZShyZXMpKVxyXG4gICAgfVxyXG5cclxuICAgIHNldFVzZXJJbmZvKHsgbmFtZSwgYWJvdXQgfSkge1xyXG4gICAgICAgIHJldHVybiBmZXRjaCh0aGlzLl9iYXNlVXJsICsgXCIvdXNlcnMvbWVcIiwge1xyXG4gICAgICAgICAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgICAgICAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgICAgICAgICAgICAgIG5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgYWJvdXRcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC50aGVuKHJlcyA9PiB0aGlzLl9jaGVja1Jlc3BvbnNlKHJlcykpXHJcblxyXG4gICAgfVxyXG5cclxuICAgIHNldEF2YXRhcihhdmF0YXIpIHtcclxuICAgICAgICByZXR1cm4gZmV0Y2godGhpcy5fYmFzZVVybCArIFwiL3VzZXJzL21lL2F2YXRhclwiLCB7XHJcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICAgICAgICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICAgICAgICAgICAgYXZhdGFyXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbihyZXMgPT4gdGhpcy5fY2hlY2tSZXNwb25zZShyZXMpKVxyXG4gICAgfVxyXG5cclxuICAgIGFkZENhcmQoeyBuYW1lLCBsaW5rIH0pIHtcclxuICAgICAgICByZXR1cm4gZmV0Y2godGhpcy5fYmFzZVVybCArIFwiL2NhcmRzXCIsIHtcclxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgICAgICAgICAgICAgIG5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgbGlua1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnRoZW4ocmVzID0+IHRoaXMuX2NoZWNrUmVzcG9uc2UocmVzKSlcclxuICAgIH1cclxuXHJcbiAgICBkZWxldGVDYXJkKGNhcmRJZCkge1xyXG4gICAgICAgIHJldHVybiBmZXRjaCh0aGlzLl9iYXNlVXJsICsgXCIvY2FyZHMvXCIgKyBjYXJkSWQsIHtcclxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgICAgICAgICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC50aGVuKHJlcyA9PiB0aGlzLl9jaGVja1Jlc3BvbnNlKHJlcykpXHJcbiAgICB9XHJcblxyXG4gICAgYWRkTGlrZShjYXJkSWQpIHtcclxuICAgICAgICByZXR1cm4gZmV0Y2godGhpcy5fYmFzZVVybCArIFwiL2NhcmRzL2xpa2VzL1wiICsgY2FyZElkLCB7XHJcbiAgICAgICAgICAgICAgICBtZXRob2Q6IFwiUFVUXCIsXHJcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC50aGVuKHJlcyA9PiB0aGlzLl9jaGVja1Jlc3BvbnNlKHJlcykpXHJcbiAgICB9XHJcblxyXG4gICAgcmVtb3ZlTGlrZShjYXJkSWQpIHtcclxuICAgICAgICByZXR1cm4gZmV0Y2godGhpcy5fYmFzZVVybCArIFwiL2NhcmRzL2xpa2VzL1wiICsgY2FyZElkLCB7XHJcbiAgICAgICAgICAgICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC50aGVuKHJlcyA9PiB0aGlzLl9jaGVja1Jlc3BvbnNlKHJlcykpXHJcbiAgICB9XHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcclxuICAgIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XHJcbiAgICAgICAgdGhpcy5faXRlbXMgPSBpdGVtcztcclxuICAgICAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xyXG4gICAgfVxyXG5cclxuICAgIHJlbmRlckl0ZW1zKCkge1xyXG4gICAgICAgIHRoaXMuX2l0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJlcGVuZEl0ZW0oZWxlbWVudCkge1xyXG4gICAgICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xyXG4gICAgfVxyXG5cclxuICAgIGFkZEl0ZW0oZWxlbWVudCkge1xyXG4gICAgICAgIHRoaXMuX2NvbnRhaW5lci5hcHBlbmQoZWxlbWVudCk7XHJcbiAgICB9XHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcclxuICAgIGNvbnN0cnVjdG9yKHsgZGF0YSwgaGFuZGxlQ2FyZENsaWNrLCBoYW5kbGVEZWxldGVDbGljayB9LCB0ZW1wbGF0ZSwgYXBpKSB7XHJcbiAgICAgICAgdGhpcy5fbGluayA9IGRhdGEubGluaztcclxuICAgICAgICB0aGlzLl9uYW1lID0gZGF0YS5uYW1lO1xyXG4gICAgICAgIHRoaXMuX2xpa2VzID0gZGF0YS5saWtlcztcclxuICAgICAgICB0aGlzLl90ZW1wbGF0ZSA9IHRlbXBsYXRlO1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcclxuICAgICAgICB0aGlzLl9oYW5kbGVEZWxldGVDbGljayA9IGhhbmRsZURlbGV0ZUNsaWNrO1xyXG4gICAgICAgIHRoaXMuX2lkID0gZGF0YS5faWQ7XHJcbiAgICAgICAgdGhpcy5fb3duZXJJZCA9IGRhdGEub3duZXIuX2lkO1xyXG4gICAgICAgIHRoaXMuX293bmVyID0gZGF0YS5vd25lcjtcclxuICAgICAgICB0aGlzLl9hcGkgPSBhcGk7XHJcbiAgICB9XHJcblxyXG4gICAgZmluZElkKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9pZDtcclxuICAgIH1cclxuXHJcbiAgICBfaGFuZGxlTGlrZSgpIHtcclxuICAgICAgICBjb25zdCBsaWtlQnV0dG9uID0gdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX2xpa2UtYnV0dG9uXCIpO1xyXG4gICAgICAgIGxpa2VCdXR0b24uY2xhc3NMaXN0LnRvZ2dsZShcImVsZW1lbnRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcclxuICAgIH1cclxuXHJcbiAgICBfdGFsbHlMaWtlcygpIHtcclxuICAgICAgICBjb25zdCBsaWtlVGFsbHkgPSB0aGlzLl9jYXJkLnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9fbGlrZS10YWxseVwiKTtcclxuICAgICAgICBsaWtlVGFsbHkudGV4dENvbnRlbnQgPSB0aGlzLl9saWtlcy5sZW5ndGhcclxuICAgIH1cclxuXHJcbiAgICBfb3duZXJMaWtlKHVzZXJJZCkge1xyXG4gICAgICAgIGNvbnN0IG93bmVyID0gdGhpcy5fbGlrZXMuZmluZChsaWtlID0+IGxpa2UuX2lkID09PSB1c2VySWQpO1xyXG4gICAgICAgIHJldHVybiBvd25lcjtcclxuICAgIH1cclxuXHJcbiAgICBoYW5kbGVUcmFzaCgpIHtcclxuICAgICAgICB0aGlzLl9jYXJkLnJlbW92ZSgpO1xyXG4gICAgICAgIHRoaXMuX2NhcmQgPSBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIF9nZXRUZW1wbGF0ZSgpIHtcclxuICAgICAgICBjb25zdCBjYXJkVGVtcGxhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX3RlbXBsYXRlKS5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudFwiKTtcclxuICAgICAgICByZXR1cm4gY2FyZFRlbXBsYXRlO1xyXG4gICAgfVxyXG5cclxuICAgIF9zZXRFdmVudExpc3RlbmVycyh1c2VySWQpIHtcclxuICAgICAgICBjb25zdCB0cmFzaEJ1dHRvbiA9IHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X190cmFzaC1idXR0b25cIik7XHJcbiAgICAgICAgaWYgKHVzZXJJZCA9PT0gdGhpcy5fb3duZXJJZCkge1xyXG4gICAgICAgICAgICB0cmFzaEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNsaWNrKHRoaXMuaWQpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRyYXNoQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJlbGVtZW50X19oaWRkZW5cIik7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgY29uc3QgbGlrZUJ1dHRvbiA9IHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X19saWtlLWJ1dHRvblwiKTtcclxuICAgICAgICBsaWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9vd25lckxpa2UodXNlcklkKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fYXBpLnJlbW92ZUxpa2UodGhpcy5faWQpXHJcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9saWtlcyA9IHJlcy5saWtlcztcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5faGFuZGxlTGlrZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl90YWxseUxpa2VzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9hcGkuYWRkTGlrZSh0aGlzLl9pZClcclxuICAgICAgICAgICAgICAgICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2xpa2VzID0gcmVzLmxpa2VzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9oYW5kbGVMaWtlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3RhbGx5TGlrZXMoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhlcnIpKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX2ltYWdlXCIpXHJcbiAgICAgICAgICAgIC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuX2hhbmRsZUNhcmRDbGljayh0aGlzLl9saW5rLCB0aGlzLl9uYW1lKSk7XHJcbiAgICB9XHJcblxyXG4gICAgY3JlYXRlQ2FyZCh1c2VySWQpIHtcclxuICAgICAgICB0aGlzLl9jYXJkID0gdGhpcy5fZ2V0VGVtcGxhdGUoKS5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgICAgICAgY29uc3QgY2FyZEltYWdlID0gdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX2ltYWdlXCIpO1xyXG4gICAgICAgIGNvbnN0IGNhcmRUaXRsZSA9IHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X190aXRsZVwiKTtcclxuXHJcbiAgICAgICAgY2FyZFRpdGxlLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcclxuICAgICAgICBjYXJkSW1hZ2Uuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gYHVybCgke3RoaXMuX2xpbmt9KWA7XHJcbiAgICAgICAgY2FyZEltYWdlLmFsdCA9IHRoaXMuX25hbWU7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLl9vd25lckxpa2UodXNlcklkKSkge1xyXG4gICAgICAgICAgICB0aGlzLl9oYW5kbGVMaWtlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKHVzZXJJZCk7XHJcbiAgICAgICAgdGhpcy5fdGFsbHlMaWtlcygpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9jYXJkO1xyXG4gICAgfVxyXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xyXG4gICAgY29uc3RydWN0b3IoeyBwZXJzb25TZWxlY3Rvciwgam9iU2VsZWN0b3IsIGF2YXRhclNlbGVjdG9yIH0pIHtcclxuICAgICAgICB0aGlzLl9uYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihwZXJzb25TZWxlY3Rvcik7XHJcbiAgICAgICAgdGhpcy5fYWJvdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGpvYlNlbGVjdG9yKTtcclxuICAgICAgICB0aGlzLl9hdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGF2YXRhclNlbGVjdG9yKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXRVc2VySW5mbygpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBuYW1lOiB0aGlzLl9uYW1lLnRleHRDb250ZW50LFxyXG4gICAgICAgICAgICBhYm91dDogdGhpcy5fYWJvdXQudGV4dENvbnRlbnRcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIHNldFVzZXJJbmZvKHVzZXIsIGpvYiwgaWQpIHtcclxuICAgICAgICB0aGlzLl9uYW1lLnRleHRDb250ZW50ID0gdXNlcjtcclxuICAgICAgICB0aGlzLl9hYm91dC50ZXh0Q29udGVudCA9IGpvYjtcclxuICAgICAgICB0aGlzLmlkID0gaWQ7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0QXZhdGFyKGF2YXRhcikge1xyXG4gICAgICAgIHRoaXMuX2F2YXRhci5zcmMgPSBhdmF0YXI7XHJcbiAgICB9XHJcbn0iLCJjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICAgIGNvbnN0cnVjdG9yKHNldHRpbmdzLCBmb3JtKSB7XHJcbiAgICAgICAgdGhpcy5fZm9ybVNlbGVjdG9yID0gc2V0dGluZ3MuX2Zvcm1TZWxlY3RvcjtcclxuICAgICAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gc2V0dGluZ3MuaW5wdXRTZWxlY3RvcjtcclxuICAgICAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IHNldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xyXG4gICAgICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBzZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xyXG4gICAgICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IHNldHRpbmdzLmlucHV0RXJyb3JDbGFzcztcclxuICAgICAgICB0aGlzLl9lcnJvckNsYXNzID0gc2V0dGluZ3MuZXJyb3JDbGFzcztcclxuICAgICAgICB0aGlzLl9mb3JtID0gZm9ybTtcclxuICAgIH1cclxuXHJcbiAgICBfc2hvd0Vycm9yTWVzc2FnZShpbnB1dCkge1xyXG4gICAgICAgIGNvbnN0IGVycm9yID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKFwiI1wiICsgaW5wdXQuaWQgKyBcIi1lcnJvclwiKTtcclxuXHJcbiAgICAgICAgZXJyb3IudGV4dENvbnRlbnQgPSBpbnB1dC52YWxpZGF0aW9uTWVzc2FnZTtcclxuICAgICAgICBlcnJvci5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gICAgICAgIGlucHV0LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIH1cclxuXHJcbiAgICBfaGlkZUVycm9yTWVzc2FnZShpbnB1dCkge1xyXG4gICAgICAgIGNvbnN0IGVycm9yID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKFwiI1wiICsgaW5wdXQuaWQgKyBcIi1lcnJvclwiKTtcclxuXHJcbiAgICAgICAgZXJyb3IudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gICAgICAgIGVycm9yLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgICAgICAgaW5wdXQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgfVxyXG5cclxuICAgIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXQpIHtcclxuICAgICAgICBpZiAoaW5wdXQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgICAgICAgdGhpcy5faGlkZUVycm9yTWVzc2FnZShpbnB1dCwgaW5wdXQudmFsaWRhdGlvbk1lc3NhZ2UpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3Nob3dFcnJvck1lc3NhZ2UoaW5wdXQsIGlucHV0LnZhbGlkYXRpb25NZXNzYWdlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgICAgIGNvbnN0IGlucHV0cyA9IFsuLi50aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcildO1xyXG4gICAgICAgIGNvbnN0IGJ1dHRvbiA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3Rvcih0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3Rvcik7XHJcblxyXG4gICAgICAgIGlucHV0cy5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICAgICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dCwgaW5wdXQudmFsaWRhdGlvbk1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRzLCBidXR0b24pO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKCdyZXNldCcsICgpID0+IHtcclxuICAgICAgICAgICAgaW5wdXRzLmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9oaWRlRXJyb3JNZXNzYWdlKGlucHV0KVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZShpbnB1dHMsIGJ1dHRvbik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgX2hhc0ludmFsaWRJbnB1dChpbnB1dHMpIHtcclxuICAgICAgICByZXR1cm4gaW5wdXRzLnNvbWUoKGlucHV0KSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiAhaW5wdXQudmFsaWRpdHkudmFsaWQ7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgX3RvZ2dsZUJ1dHRvblN0YXRlKGlucHV0cywgYnV0dG9uKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dChpbnB1dHMpKSB7XHJcbiAgICAgICAgICAgIGJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICAgICAgICBidXR0b24uZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICAgICAgICBidXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgICAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldnQpID0+IHtcclxuICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIH1cclxuXHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEZvcm1WYWxpZGF0b3I7IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gICAgY29uc3RydWN0b3IocG9wdXBFbGVtZW50KSB7XHJcbiAgICAgICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cEVsZW1lbnQpO1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBvcGVuKCkge1xyXG4gICAgICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwicG9wdXBfb3BlbmVkXCIpO1xyXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgICB9XHJcblxyXG4gICAgY2xvc2UoKSB7XHJcbiAgICAgICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJwb3B1cF9vcGVuZWRcIik7XHJcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICAgIH1cclxuXHJcbiAgICBfaGFuZGxlRXNjQ2xvc2UoZXZ0KSB7XHJcbiAgICAgICAgaWYgKGV2dC5rZXkgPT09ICdFc2NhcGUnKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2dCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3BvcHVwX19jbG9zZS1idXR0b24nKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2dCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3BvcHVwX29wZW5lZCcpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxufSIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwb3B1cEVsZW1lbnQpIHtcclxuICAgICAgICBzdXBlcihwb3B1cEVsZW1lbnQpO1xyXG4gICAgICAgIHRoaXMuX2Z1bGxJbWFnZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbWFnZVwiKTtcclxuICAgICAgICB0aGlzLl9mdWxsVGl0bGUgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fdGl0bGVcIik7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIG9wZW4obGluaywgbmFtZSkge1xyXG4gICAgICAgIHRoaXMuX2Z1bGxJbWFnZS5zcmMgPSBsaW5rO1xyXG4gICAgICAgIHRoaXMuX2Z1bGxUaXRsZS50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICAgICAgc3VwZXIub3BlbigpO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gICAgY29uc3RydWN0b3IoeyBwb3B1cEVsZW1lbnQsIGhhbmRsZUZvcm1TdWJtaXQgfSkge1xyXG4gICAgICAgIHN1cGVyKHBvcHVwRWxlbWVudCk7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XHJcbiAgICAgICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1cIik7XHJcbiAgICAgICAgdGhpcy5fc3VibWl0ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX3N1Ym1pdFwiKTtcclxuICAgICAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbChcIi5mb3JtX19pdGVtXCIpKTtcclxuICAgIH1cclxuXHJcbiAgICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICAgICAgdGhpcy5fZm9ybVZhbHVlcyA9IHt9O1xyXG4gICAgICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKGlucHV0ID0+IHtcclxuICAgICAgICAgICAgdGhpcy5fZm9ybVZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9mb3JtVmFsdWVzO1xyXG4gICAgfVxyXG5cclxuICAgIG9wZW4oKSB7XHJcbiAgICAgICAgc3VwZXIub3BlbigpO1xyXG4gICAgICAgIHRoaXMuX2Zvcm0ucmVzZXQoKTtcclxuICAgIH1cclxuXHJcbiAgICBjbG9zZSgpIHtcclxuICAgICAgICBzdXBlci5jbG9zZSgpO1xyXG4gICAgICAgIHRoaXMuX2Zvcm0ucmVzZXQoKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgICAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgdGhpcy5fc3VibWl0LnRleHRDb250ZW50ID0gXCJTYXZpbmcuLi5cIjtcclxuICAgICAgICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3N1Ym1pdC50ZXh0Q29udGVudCA9IHRoaXMuX3N1Ym1pdC52YWx1ZTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIH1cclxufSIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBDb25maXJtIGV4dGVuZHMgUG9wdXAge1xyXG4gICAgY29uc3RydWN0b3IocG9wdXBFbGVtZW50KSB7XHJcbiAgICAgICAgc3VwZXIocG9wdXBFbGVtZW50KTtcclxuICAgICAgICB0aGlzLl9idXR0b24gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtX19zdWJtaXRcIik7XHJcbiAgICB9XHJcblxyXG4gICAgaGFuZGxlWWVzKGNvbmZpcm0pIHtcclxuICAgICAgICB0aGlzLl9jb25maXJtID0gY29uZmlybTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgICAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiB7XHJcbiAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICB0aGlzLl9jb25maXJtKCk7XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxufSIsImNvbnN0IGRlZmF1bHRDb25maWcgPSB7XHJcbiAgICBmb3JtU2VsZWN0b3I6IFwiLmZvcm1cIixcclxuICAgIGlucHV0U2VsZWN0b3I6IFwiLmZvcm1fX2l0ZW1cIixcclxuICAgIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5mb3JtX19zdWJtaXRcIixcclxuICAgIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwiZm9ybV9fc3VibWl0X2Rpc2FibGVkXCIsXHJcbiAgICBpbnB1dEVycm9yQ2xhc3M6IFwiZm9ybV9fdHlwZS1lcnJvclwiLFxyXG4gICAgZXJyb3JDbGFzczogXCJwb3B1cF9fZXJyb3JfdmlzaWJsZVwiXHJcbn07XHJcblxyXG4vLyBPcGVuIEJ1dHRvbnNcclxuY29uc3QgZWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19lZGl0LWJ1dHRvbicpO1xyXG5jb25zdCBhZGRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYWRkLWJ1dHRvbicpO1xyXG5jb25zdCBhdmF0YXJCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYXZhdGFyLWJ1dHRvbicpO1xyXG4vLyBGb3Jtc1xyXG5jb25zdCBmb3JtQWRkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZvcm1fYWRkJyk7XHJcbmNvbnN0IGZvcm1FZGl0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZvcm1fZWRpdCcpO1xyXG5jb25zdCBmb3JtQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZvcm1fYXZhdGFyJyk7XHJcblxyXG4vLyBJbnB1dHNcclxuY29uc3QgcGVyc29uID0gZm9ybUVkaXQucXVlcnlTZWxlY3RvcignLmZvcm1fX2l0ZW1faW5wdXRfbmFtZScpO1xyXG5jb25zdCBqb2IgPSBmb3JtRWRpdC5xdWVyeVNlbGVjdG9yKCcuZm9ybV9faXRlbV9pbnB1dF9qb2InKTtcclxuXHJcbmV4cG9ydCB7IGRlZmF1bHRDb25maWcsIGVkaXRCdXR0b24sIGFkZEJ1dHRvbiwgYXZhdGFyQnV0dG9uLCBmb3JtQWRkLCBmb3JtRWRpdCwgZm9ybUF2YXRhciwgcGVyc29uLCBqb2IgfTsiLCJpbXBvcnQgQXBpIGZyb20gXCIuLi9jb21wb25lbnRzL0FwaS5qc1wiO1xyXG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XHJcbmltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XHJcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcclxuaW1wb3J0IFBvcHVwQ29uZmlybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cENvbmZpcm0uanNcIjtcclxuaW1wb3J0IHtcclxuICAgIGRlZmF1bHRDb25maWcsXHJcbiAgICBlZGl0QnV0dG9uLFxyXG4gICAgYWRkQnV0dG9uLFxyXG4gICAgYXZhdGFyQnV0dG9uLFxyXG4gICAgZm9ybUFkZCxcclxuICAgIGZvcm1FZGl0LFxyXG4gICAgZm9ybUF2YXRhcixcclxuICAgIHBlcnNvbixcclxuICAgIGpvYlxyXG59IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcclxuaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcclxuXHJcbmNvbnN0IGFwaSA9IG5ldyBBcGkoe1xyXG4gICAgYmFzZVVybDogXCJodHRwczovL2Fyb3VuZC5ub21vcmVwYXJ0aWVzLmNvL3YxL2dyb3VwLTdcIixcclxuICAgIGhlYWRlcnM6IHtcclxuICAgICAgICBhdXRob3JpemF0aW9uOiBcImNkMWNmZGY4LTRhYTctNDZjNS05NDY1LTQ0YzdjMTVjNDAzYlwiLFxyXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXHJcbiAgICB9XHJcbn0pO1xyXG5cclxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xyXG4gICAgcGVyc29uU2VsZWN0b3I6IFwiLnByb2ZpbGVfX25hbWVcIixcclxuICAgIGpvYlNlbGVjdG9yOiBcIi5wcm9maWxlX19vY2N1cGF0aW9uXCIsXHJcbiAgICBhdmF0YXJTZWxlY3RvcjogXCIucHJvZmlsZV9fYXZhdGFyXCJcclxufSk7XHJcblxyXG5mdW5jdGlvbiBtYWtlQ2FyZChpdGVtcykge1xyXG4gICAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKHtcclxuICAgICAgICBkYXRhOiBpdGVtcyxcclxuICAgICAgICBoYW5kbGVDYXJkQ2xpY2s6IChsaW5rLCBuYW1lKSA9PiB7IHBvcHVwSW1hZ2Uub3BlbihsaW5rLCBuYW1lKSB9LFxyXG4gICAgICAgIGhhbmRsZURlbGV0ZUNsaWNrOiAoKSA9PiB7XHJcbiAgICAgICAgICAgIHBvcHVwQ29uZmlybS5vcGVuKCk7XHJcbiAgICAgICAgICAgIHBvcHVwQ29uZmlybS5oYW5kbGVZZXMoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgYXBpLmRlbGV0ZUNhcmQoY2FyZC5maW5kSWQoKSlcclxuICAgICAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhcmQuaGFuZGxlVHJhc2goKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcG9wdXBDb25maXJtLmNsb3NlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgfSwgXCIuZWxlbWVudC10ZW1wbGF0ZVwiLCBhcGkpO1xyXG4gICAgcmV0dXJuIGNhcmQuY3JlYXRlQ2FyZCh1c2VySW5mby5pZCk7XHJcbn1cclxuXHJcblByb21pc2UuYWxsKFtcclxuICAgICAgICBhcGkuZ2V0VXNlckluZm8oKSxcclxuICAgICAgICBhcGkuZ2V0SW5pdGlhbENhcmRzKClcclxuICAgIF0pXHJcbiAgICAudGhlbigoW3BlcnNvbiwgcGxhY2VzXSkgPT4ge1xyXG4gICAgICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHBlcnNvbi5uYW1lLCBwZXJzb24uYWJvdXQsIHBlcnNvbi5faWQpO1xyXG4gICAgICAgIHVzZXJJbmZvLnNldEF2YXRhcihwZXJzb24uYXZhdGFyKTtcclxuICAgICAgICBjb25zdCBjYXJkcyA9IG5ldyBTZWN0aW9uKHtcclxuICAgICAgICAgICAgaXRlbXM6IHBsYWNlcyxcclxuICAgICAgICAgICAgcmVuZGVyZXI6IChjYXJkSXRlbSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY2FyZHMuYWRkSXRlbShtYWtlQ2FyZChjYXJkSXRlbSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSwgXCIuZWxlbWVudHNcIik7XHJcbiAgICAgICAgY2FyZHMucmVuZGVySXRlbXMoKTtcclxuICAgICAgICBjb25zdCBwb3B1cEFkZCA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcclxuICAgICAgICAgICAgcG9wdXBFbGVtZW50OiBcIi5wb3B1cF90eXBlX2FkZFwiLFxyXG4gICAgICAgICAgICBoYW5kbGVGb3JtU3VibWl0OiAobmV3RGF0YSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGFwaS5hZGRDYXJkKG5ld0RhdGEpXHJcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oKG5ld0RhdGEpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2FyZCA9IG1ha2VDYXJkKG5ld0RhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXJkcy5wcmVwZW5kSXRlbShjYXJkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcG9wdXBBZGQuY2xvc2UoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHBvcHVwQWRkLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICAgICAgYWRkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcblxyXG4gICAgICAgICAgICBwb3B1cEFkZC5vcGVuKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKFwiZXJyXCIsIGVycikpO1xyXG5cclxuXHJcblxyXG5jb25zdCBwb3B1cEVkaXQgPSBuZXcgUG9wdXBXaXRoRm9ybSh7XHJcbiAgICBwb3B1cEVsZW1lbnQ6IFwiLnBvcHVwX3R5cGVfZWRpdFwiLFxyXG4gICAgaGFuZGxlRm9ybVN1Ym1pdDogKG5ld1VzZXIpID0+IHtcclxuICAgICAgICByZXR1cm4gYXBpLnNldFVzZXJJbmZvKHsgbmFtZTogbmV3VXNlci51c2VyLCBhYm91dDogbmV3VXNlci5qb2IgfSlcclxuICAgICAgICAgICAgLnRoZW4obmV3VXNlciA9PiB7XHJcbiAgICAgICAgICAgICAgICB1c2VySW5mby5zZXRVc2VySW5mbyhuZXdVc2VyLm5hbWUsIG5ld1VzZXIuYWJvdXQsIG5ld1VzZXIuX2lkKTtcclxuICAgICAgICAgICAgICAgIHBvcHVwRWRpdC5jbG9zZSgpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coXCJlcnJcIiwgZXJyKSk7XHJcbiAgICB9XHJcbn0pO1xyXG5cclxucG9wdXBFZGl0LnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbmVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgIGNvbnN0IGZpbGxVc2VyID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcclxuICAgIHBvcHVwRWRpdC5vcGVuKCk7XHJcbiAgICBwZXJzb24udmFsdWUgPSBmaWxsVXNlci5uYW1lO1xyXG4gICAgam9iLnZhbHVlID0gZmlsbFVzZXIuYWJvdXQ7XHJcbn0pO1xyXG5cclxuY29uc3QgcG9wdXBBdmF0YXIgPSBuZXcgUG9wdXBXaXRoRm9ybSh7XHJcbiAgICBwb3B1cEVsZW1lbnQ6IFwiLnBvcHVwX3R5cGVfYXZhdGFyXCIsXHJcbiAgICBoYW5kbGVGb3JtU3VibWl0OiAoaW1hZ2VMaW5rKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIGFwaS5zZXRBdmF0YXIoaW1hZ2VMaW5rLmxpbmspXHJcbiAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICAgICAgICAgIHVzZXJJbmZvLnNldEF2YXRhcihyZXMuYXZhdGFyKTtcclxuICAgICAgICAgICAgICAgIHBvcHVwQXZhdGFyLmNsb3NlKCk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhcImVyclwiLCBlcnIpKTtcclxuICAgIH1cclxufSk7XHJcbnBvcHVwQXZhdGFyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbmF2YXRhckJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgcG9wdXBBdmF0YXIub3BlbigpO1xyXG59KTtcclxuXHJcbmNvbnN0IHBvcHVwSW1hZ2UgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXCIucG9wdXBfdHlwZV9pbWFnZVwiKTtcclxuY29uc3QgcG9wdXBDb25maXJtID0gbmV3IFBvcHVwQ29uZmlybShcIi5wb3B1cF90eXBlX2NvbmZpcm1cIik7XHJcbnBvcHVwSW1hZ2Uuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxucG9wdXBDb25maXJtLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4vLyBFbmFibGUgVmFsaWRhdG9yc1xyXG5jb25zdCBlZGl0Rm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGRlZmF1bHRDb25maWcsIGZvcm1FZGl0KTtcclxuY29uc3QgYWRkRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGRlZmF1bHRDb25maWcsIGZvcm1BZGQpO1xyXG5jb25zdCBhdmF0YXJGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoZGVmYXVsdENvbmZpZywgZm9ybUF2YXRhcik7XHJcbmVkaXRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuYWRkRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbmF2YXRhckZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpOyJdLCJzb3VyY2VSb290IjoiIn0=